# All configuration for plugins and other utils is defined here.
# Read more about `setup.cfg`:
# https://docs.python.org/3/distutils/configfile.html

[coverage:run]
branch = True
source = server/apps
omit =
  */management/commands/*
  */migrations/*
  */__init__.py


[flake8]
max-line-length = 80
max-complexity = 6
statistics = true
doctests = True
inline-quotes = single
accept-encodings = utf-8
ignore =
  W503, D100, D104, D106, D401, X100

  A003
  C101
  C819
  D101
  D102
  D103
  D105
  D107
  D200
  D202
  D204
  D205
  D413
  I001
  I004
  I003
  WPS305
  WPS121
  WPS110
  WPS609
  WPS604
  WPS201
  WPS433
  WPS602
  WPS430
  WPS412
  WPS420
  WPS436
  WPS300
  WPS306
  WPS319
  WPS318
  WPS317
  WPS608
  WPS601
  WPS504
  WPS503
  WPS441
  WPS440
  WPS432
  WPS429
  WPS324
  WPS226
  WPS215
  WPS211
  WPS214
  WPS210
  WPS111
  WPS100
  WPS338
  WPS337
  WPS204
  WPS202
  WPS221
  WPS407
  WPS230
  WPS421
  WPS437
  WPS431

per-file-ignores =
# Allow `__init__.py` with logic for configuration:
  server/settings/*.py: WPS226, WPS407, WPS412, WPS432

exclude =
  server/apps/*/migrations/*.py
  server/apps/*/__init__.py
  server/apps/*/management/commands/*.py
  server/settings/environments/development.py


[tool:pytest]
DJANGO_SETTINGS_MODULE = server.settings

testpaths = tests
python_files =
  test_*.py
ignore = server/apps/
# py.test options:
norecursedirs = *.egg .eggs dist build docs .tox .git __pycache__

# You will need to measure your tests speed with `-n auto` and without it,
# so you can see whether it gives you any performance gain, or just gives
# you an overhead. See `docs/template/development-process.rst`.

addopts =
  -p no:warnings
  --tb=short
  --showlocals
  -ra
  --nomigrations
  --show-capture no
  --reuse-db

[mypy]
# The mypy configurations: http://bit.ly/2zEl9WI
python_version = 3.6
check_untyped_defs = True
;disallow_any_explicit = True
;disallow_any_generics = True
disallow_untyped_calls = True
ignore_errors = False
ignore_missing_imports = True
strict_optional = True
warn_unused_ignores = True
warn_redundant_casts = True
warn_unused_configs = True
warn_no_return = False

[mypy-server.*.migrations.*]
ignore_errors = True

[mypy-server.*.management.commands.*]
ignore_errors = True

[doc8]
ignore-path = docs/_build
max-line-length = 80
sphinx = True
